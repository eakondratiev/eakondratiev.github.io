async function sha256page(f){async function x(a,c){let d=!1;if(0===a.length)c.error("Please, select a file.");else{1<a.length&&(d=!0);a=a[0];c.start(a);try{l.sha256init();await I(a,5242880,c);const b=new Uint8Array(l.memory.buffer,5244929,65);if(5244929+b.length>l.memory.buffer.byteLength)c.error("Something went wrong. Computing SHA256: not enough memory allocated for output buffer."),T.log("WASM Memory");else{l.sha256digest(5244929);var e=String.fromCharCode.apply(null,b.subarray(0,64));c.finish(e,
d)}}catch(b){c.error("Something went wrong. An error occurred while calculating the checksum of the file."),T.log("Compute error")}}}async function I(a,c,d){let e=0,b=0;for(;e<a.size;){const g=a.slice(e,Math.min(e+c,a.size));try{b=1;const h=await J(g),m=h.byteLength;b=2;const y=new Uint8Array(l.memory.buffer,2048,m);b=3;y.set(new Uint8Array(h));b=4;l.sha256update(2048,m);d.progress(e)}catch(h){d.error("Something went wrong. Error processing the file chunk.");T.log(`WASM Chunk (${b})`);break}e+=c}}
function J(a){return new Promise((c,d)=>{const e=new FileReader;e.onload=b=>c(b.target.result);e.onerror=()=>d(e.error);e.readAsArrayBuffer(a)})}function C(){K.style.display=p.value?"none":"block"}function z(a){u.disabled=!a;p.disabled=!a;a?k.classList.remove(D):k.classList.add(D)}function E(){const a=p.value.replace(/[\s\-]+/g,"");let c="",d=(q.dataset.sha256||"").trim();n.classList.remove(F);n.classList.remove(G);void 0!==d&&""!==d&&""!==a&&(a.toLowerCase()===d.toLowerCase()?(c=H.match,n.classList.add(F)):
(c=H.noMatch,n.classList.add(G)));n.innerText=c}const L=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0}),M=/^[a-f0-9]+$/i;let N=f.wasmUrl,k=document.getElementById(f.fileDropElement),u=document.getElementById(f.fileElement),p=document.getElementById(f.expectedElement),K=document.getElementById(f.expectedPlaceholder),q=document.getElementById(f.resultElement),n=document.getElementById(f.compareElement),A=document.getElementById(f.progressElement),v=document.getElementById(f.statElement),
r=document.getElementById(f.messageElement),O=f.dropZoneText,B=f.dropReadyCss,D=f.dropDisabledCss,P=f.resultCss,Q=f.flashCss,F=f.compareMatchCss,G=f.compareNoMatchCss,H={match:f.textMatch,noMatch:f.textNoMatch};const w=function(){let a="",c=0,d="",e=void 0;return{start:function(b){a=b.name;c=b.size;d="";q.innerText="";n.innerText="";n.innerText="";A.innerText="0%";v.innerText="";r.innerText="";r.style.display="none";z(!1);e=performance.now()},progress:function(b){var g=c,h=e,m=(b/g*100).toFixed(2);
104857600>g?b="":(g-=b,h=performance.now()-h,1>h?b="":(b/=h,b=1>b?"":`, approximate wait time: ${(.001*g/b).toFixed(1)} sec.`));A.innerHTML=`${m}%${b}`},finish:function(b,g){var h=g?"Only one file was processed<br>":"";d=b;g=performance.now()-e;z(!0);A.innerText="";q.dataset.sha256=b;q.innerHTML="<div><b>SHA-256</b></div>"+`<div class="${P} ${Q}">${d}</div>`;b=h+`<span>File:</span> ${a}<br>`;h=c;var m={minimumFractionDigits:0,maximumFractionDigits:1},y=new Intl.NumberFormat({minimumFractionDigits:0,
maximumFractionDigits:0,useGrouping:!0}),t="";1073741824<=h?t=T.formatNumber(h/1073741824,"en-US",m)+" GB, ":1048576<=h?t=T.formatNumber(h/1048576,"en-US",m)+" MB, ":1024<=h&&(t=T.formatNumber(h/1024,"en-US",m)+" KB, ");t+=y.format(h)+" byte(s)";v.innerHTML=b+`<span>Size:</span> ${t}<br>`;300<g&&(v.innerHTML+=`<span>Elapsed time:</span> ${(g/1E3).toFixed(2)} s<br>`+`<span>Performance:</span> ${L.format(c/g)} bytes per ms`);E();T.log(`Computed in ${(g/1E3).toFixed(2)}`)},error:function(b){var g=document.createElement("div");
g.textContent="Something went wrong. "+b;g.classList.add("page-message");g.classList.add("page-message--error");r.textContent="";r.appendChild(g);r.style.display="block";z(!0)}}}();let l;f={env:{memory_base:0,table_base:0,memory:new WebAssembly.Memory({initial:256,maximum:256}),table:new WebAssembly.Table({initial:0,element:"anyfunc"}),emscripten_memcpy_big:function(a,c,d){const e=new Uint8Array(l.memory.buffer);e.set(e.subarray(c,c+d),a)}}};(function(){var a=T.getUrlParameters();"undefined"!==typeof a.expected&&
""!==a.expected&&(a="string"===typeof a.expected?a.expected:a.expected[0],M.test(a)&&(p.value=a))})();C();l=await async function(a,c){let d;try{if("instantiateStreaming"in WebAssembly){const e=await fetch(a);d=await WebAssembly.instantiateStreaming(e,c)}else{const e=await (await fetch(a)).arrayBuffer();d=await WebAssembly.instantiate(e,c)}return{instance:d,memory:d.instance.exports.memory,sha256init:d.instance.exports.init_sha256,sha256update:d.instance.exports.update_sha256,sha256digest:d.instance.exports.digest_sha256}}catch(e){return w.error("Wasm module was not loaded."),
T.log("WASM not loaded"),null}}(N,f);null===l?q.innerText="Something went wrong: the WASM module was not loaded.":(k.innerHTML=O,u.disabled=!1,u.addEventListener("change",function(a){x(a.target.files,w)}),u.addEventListener("keypress",function(a){"Enter"===a.key&&x(a.target.files,w)}),k.addEventListener("dragenter",function(a){a.stopPropagation();a.preventDefault();k.classList.add(B)}),k.addEventListener("dragleave",function(a){a.stopPropagation();a.preventDefault();k.classList.remove(B)}),k.addEventListener("dragover",
function(a){a.stopPropagation();a.preventDefault()}),k.addEventListener("drop",function(a){var c=a.dataTransfer;a.stopPropagation();a.preventDefault();k.classList.remove(B);x(c.files,w)}),p.addEventListener("input",function(a){C();E()}))};
