async function sha256page(g){async function v(a,b){let e=!1;if(0===a.length)b.error("Please, select a file.");else{1<a.length&&(e=!0);a=a[0];b.start(a);try{k.sha256init();await E(a,5242880,b);const c=new Uint8Array(k.memory.buffer,5244929,65);if(5244929+c.length>k.memory.buffer.byteLength)b.error("Something went wrong. Computing SHA256: not enough memory allocated for output buffer."),T.log("WASM Memory");else{k.sha256digest(5244929);var d=String.fromCharCode.apply(null,c.subarray(0,64));b.finish(d,
e)}}catch(c){b.error("Something went wrong. An error occurred while calculating the checksum of the file."),T.log("Compute error")}}}async function E(a,b,e){let d=0;for(;d<a.size;){const c=a.slice(d,Math.min(d+b,a.size));try{const f=await F(c),h=f.byteLength;(new Uint8Array(k.memory.buffer,2048,h)).set(new Uint8Array(f));k.sha256update(2048,h);e.progress(d)}catch(f){e.error("Something went wrong. Error processing the file chunk.");T.log("WASM Chunk");break}d+=b}}function F(a){return new Promise((b,
e)=>{const d=new FileReader;d.onload=c=>b(c.target.result);d.onerror=()=>e(d.error);d.readAsArrayBuffer(a)})}function A(){expectedPlaceholder.style.display=w.value?"none":"block"}function B(){const a=w.value.replace(/[\s\-]+/g,"");let b="",e=n.dataset.sha256;m.classList.remove(C);m.classList.remove(D);void 0!==e&&""!==e&&""!==a&&(a.toLowerCase()===e.toLowerCase()?(b="Values match",m.classList.add(C)):(b="Values do not match",m.classList.add(D)));m.innerText=b}const G=new Intl.NumberFormat("en-US",
{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0});let H=g.wasmUrl,l=document.getElementById(g.fileDropElement),x=document.getElementById(g.fileElement),w=document.getElementById(g.expectedElement);document.getElementById(g.expectedPlaceholder);let n=document.getElementById(g.resultElement),m=document.getElementById(g.compareElement),y=document.getElementById(g.progressElement),t=document.getElementById(g.statElement),p=document.getElementById(g.messageElement),I=g.dropZoneText,z=g.dropReadyCss,
J=g.resultCss,K=g.flashCss,C=g.compareMatchCss,D=g.compareNoMatchCss;const u=function(){let a="",b=0,e="",d=void 0;return{start:function(c){g=g||{};a=c.name;b=c.size;e="";n.innerText="";m.innerText="";m.innerText="";y.innerText="0%";t.innerText="";p.innerText="";p.style.display="none";d=performance.now()},progress:function(c){var f=b,h=d,q=(c/f*100).toFixed(2);104857600>f?c="":(f-=c,h=performance.now()-h,1>h?c="":(c/=h,c=1>c?"":`, approximate wait time: ${(.001*f/c).toFixed(1)} sec.`));y.innerHTML=
`${q}%${c}`},finish:function(c,f){var h=f?"Only one file was processed<br>":"";e=c;f=performance.now()-d;y.innerText="";n.dataset.sha256=c;n.innerHTML="<div><b>SHA-256</b></div>"+`<div class="${J} ${K}">${e}</div>`;c=h+`<span>File:</span> ${a}<br>`;h=b;var q={minimumFractionDigits:0,maximumFractionDigits:1},L=new Intl.NumberFormat({minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:!0}),r="";1073741824<=h?r=T.formatNumber(h/1073741824,"en-US",q)+" GB, ":1048576<=h?r=T.formatNumber(h/1048576,
"en-US",q)+" MB, ":1024<=h&&(r=T.formatNumber(h/1024,"en-US",q)+" KB, ");r+=L.format(h)+" byte(s)";t.innerHTML=c+`<span>Size:</span> ${r}<br>`;300<f&&(t.innerHTML+=`<span>Elapsed time:</span> ${(f/1E3).toFixed(2)} s<br>`+`<span>Performance:</span> ${G.format(b/f)} bytes per ms`);B();T.log("Computed")},error:function(c){var f=document.createElement("div");f.textContent="Something went wrong. "+c;f.classList.add("page-message");f.classList.add("page-message--error");p.textContent="";p.appendChild(f);
p.style.display="block"}}}();let k,M={env:{memory_base:0,table_base:0,memory:new WebAssembly.Memory({initial:256,maximum:256}),table:new WebAssembly.Table({initial:0,element:"anyfunc"}),emscripten_memcpy_big:function(a,b,e){const d=new Uint8Array(k.memory.buffer);d.set(d.subarray(b,b+e),a)}}};A();k=await async function(a,b){try{const e=await fetch(a),d=await WebAssembly.instantiateStreaming(e,b);return{instance:d,memory:d.instance.exports.memory,sha256init:d.instance.exports.init_sha256,sha256update:d.instance.exports.update_sha256,
sha256digest:d.instance.exports.digest_sha256}}catch(e){return u.error("Wasm module was not loaded."),T.log("WASM not loaded"),null}}(H,M);null===k?n.innerText="Something went wrong: the WASM module was not loaded.":(l.innerHTML=I,x.disabled=!1,x.addEventListener("change",function(a){v(a.target.files,u)}),x.addEventListener("keypress",function(a){"Enter"===a.key&&v(a.target.files,u)}),l.addEventListener("dragenter",function(a){a.stopPropagation();a.preventDefault();l.classList.add(z)}),l.addEventListener("dragleave",
function(a){a.stopPropagation();a.preventDefault();l.classList.remove(z)}),l.addEventListener("dragover",function(a){a.stopPropagation();a.preventDefault()}),l.addEventListener("drop",function(a){var b=a.dataTransfer;a.stopPropagation();a.preventDefault();l.classList.remove(z);v(b.files,u)}),w.addEventListener("input",function(a){A();B()}))};
