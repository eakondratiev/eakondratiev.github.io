async function sha256page(s){"use strict";const D=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!0}),w={Enabled:!0,Disabled:!1},k=/^[a-f0-9]+$/i;let H=s.wasmUrl,c=document.getElementById(s.fileDropElement),p=document.getElementById(s.fileElement),d=document.getElementById(s.expectedElement),A=document.getElementById(s.expectedPlaceholder),y=document.getElementById(s.resultElement),f=document.getElementById(s.compareElement),S=document.getElementById(s.progressElement),v=document.getElementById(s.statElement),E=document.getElementById(s.messageElement),x=s.dropReadyCss,C=s.dropDisabledCss,N=s.resultCss,U=s.flashCss,_=s.compareMatchCss,I=s.compareNoMatchCss,B={match:s.textMatch,noMatch:s.textNoMatch};const h=Z();let m,W={env:{memory_base:0,table_base:0,memory:new WebAssembly.Memory({initial:256,maximum:256}),table:new WebAssembly.Table({initial:0,element:"anyfunc"}),emscripten_memcpy_big:function(e,t,n){const r=new Uint8Array(m.memory.buffer);r.set(r.subarray(t,t+n),e)}}};if((function(){let e=T.getUrlParameters();if(typeof e.expected<"u"&&e.expected!==""){let t=typeof e.expected=="string"?e.expected:e.expected[0];k.test(t)&&(d.value=t)}})(),F(),m=await V(H,W),m===null){y.innerText="Something went wrong: the WASM module was not loaded.";return}p.disabled=!1,p.addEventListener("change",function(e){L(e.target.files,h)}),p.addEventListener("keypress",function(e){e.key==="Enter"&&L(e.target.files,h)}),c.addEventListener("dragenter",function(e){e.stopPropagation(),e.preventDefault(),c.classList.add(x)}),c.addEventListener("dragleave",function(e){e.stopPropagation(),e.preventDefault(),c.classList.remove(x)}),c.addEventListener("dragover",function(e){e.stopPropagation(),e.preventDefault()}),c.addEventListener("drop",function(e){var t=e.dataTransfer;e.stopPropagation(),e.preventDefault(),c.classList.remove(x),L(t.files,h)}),c.addEventListener("click",function(e){p.click()}),d.addEventListener("input",function(e){F(),P()}),document.addEventListener("keydown",function(e){var t=e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||e.target.tagName==="SELECT";if(!t&&!(e.altKey||e.ctrlKey))switch(e.key){case"f":case"F":document.getElementById("input-file").click(),e.preventDefault();break;case"e":case"E":d.focus(),e.preventDefault();break}});async function L(e,t){let n=!1;if(e.length===0){t.error("Please, select a file.");return}e.length>1&&(n=!0);let r=e[0];t.start(r);try{m.sha256init(),await $(r,5242880,t);const a=5244929,i=new Uint8Array(m.memory.buffer,a,65);if(a+i.length>m.memory.buffer.byteLength){t.error("Something went wrong. Computing SHA256: not enough memory allocated for output buffer."),T.log("WASM Memory");return}m.sha256digest(a);const l=String.fromCharCode.apply(null,i.subarray(0,64));t.finish(l,n)}catch{t.error("Something went wrong. An error occurred while calculating the checksum of the file."),T.log("Compute error")}}async function $(e,t,n){let r=0,a=0;for(;r<e.size;){const i=Math.min(r+t,e.size),l=e.slice(r,i);try{a=1;const g=await G(l),o=g.byteLength;a=2;const u=new Uint8Array(m.memory.buffer,2048,o);a=3,u.set(new Uint8Array(g)),a=4,m.sha256update(2048,o),r+=t,n.progress(r)}catch(g){n.error("Something went wrong. Error processing the file chunk."+g),T.log(`WASM Chunk (${a})`);break}}}function R(e,t,n){if(t<104857600)return"";var r=t-e,a=performance.now()-n;if(a<1)return"";var i=e/a;return i<1?"":`, approximate wait time: ${(.001*r/i).toFixed(1)} sec.`}function K(e,t,n){return`${(e/t*100).toFixed(2)}%${R(e,t,n)}`}function G(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=a=>t(a.target.result),r.onerror=()=>n(r.error),r.readAsArrayBuffer(e)})}function O(e){var t={minimumFractionDigits:0,maximumFractionDigits:1},n=new Intl.NumberFormat({minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:!0}),r=1024,a=1048576,i=1073741824,l="";return e>=i?l=T.formatNumber(e/i,"en-US",t)+" GB, ":e>=a?l=T.formatNumber(e/a,"en-US",t)+" MB, ":e>=r&&(l=T.formatNumber(e/r,"en-US",t)+" KB, "),l+=n.format(e)+" byte(s)",l}function F(){d.value?A.style.display="none":A.style.display="block"}function M(e){p.disabled=!e,d.disabled=!e,e?c.classList.remove(C):c.classList.add(C)}function Z(){let e="",t=0,n="",r;return{start:a,progress:i,finish:l,error:g};function a(o){e=o.name,t=o.size,n="",y.innerText="",f.innerText="",S.innerText="0%",v.innerText="",E.innerText="",E.style.display="none",M(w.Disabled),r=performance.now()}function i(o){S.innerHTML=K(o,t,r)}function l(o,u){let X=u?"Only one file was processed<br>":"";n=o;const b=performance.now()-r;M(w.Enabled),S.innerText="",y.dataset.sha256=o,y.innerHTML=`<div><b>SHA-256</b></div><div class="${N} ${U}">${n}</div>`,v.innerHTML=X+`<span>File:</span> ${e}<br><span>Size:</span> ${O(t)}<br>`,b>300&&(v.innerHTML+=`<span>Elapsed time:</span> ${(b/1e3).toFixed(2)} s<br><span>Performance:</span> ${D.format(t/b)} bytes per ms`),P(),T.log(`Computed in ${(b/1e3).toFixed(2)}`)}function g(o){var u=document.createElement("div");u.textContent=o,u.classList.add("page-message"),u.classList.add("page-message--error"),E.textContent="",E.appendChild(u),E.style.display="block",M(w.Enabled)}}function P(){const e=d.value.replace(/[\s\-]+/g,"");let t="",n=(y.dataset.sha256||"").trim();f.classList.remove(_),f.classList.remove(I),n!==void 0&&n!==""&&e!==""&&(e.toLowerCase()===n.toLowerCase()?(t=B.match,f.classList.add(_)):(t=B.noMatch,f.classList.add(I))),f.innerText=t}async function V(e,t){let n;try{if("instantiateStreaming"in WebAssembly){const r=await fetch(e);n=await WebAssembly.instantiateStreaming(r,t)}else{const a=await(await fetch(e)).arrayBuffer();n=await WebAssembly.instantiate(a,t)}return{instance:n,memory:n.instance.exports.memory,sha256init:n.instance.exports.init_sha256,sha256update:n.instance.exports.update_sha256,sha256digest:n.instance.exports.digest_sha256}}catch{return h.error("Wasm module was not loaded."),T.log("WASM not loaded"),null}}}
