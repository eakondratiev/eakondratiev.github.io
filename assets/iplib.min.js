/*
 In public domain since 2019-09-07.
*/
(function(f,u){function l(a){return p(a,4,255)}function p(a,b,c){if("object"!==typeof a||null===a||a.length!==b)return!1;for(b=0;b<a.length;b++)if(0>a[b]||a[b]>c)return!1;return!0}function m(a,b){var c=[];if(null===a||null===b||a.length!==b.length)return null;for(var e=0;e<a.length;e++){var d=a[e]^b[e]^255;c.push(d)}return c}function q(a){var b=0,c=255,e,d;if(null===a)return{bits:-1,error:1};for(e=0;3>=e;e++){var g=a[e];for(d=7;0<=d;d--){var h=g&128;0<h&&b++;if(h>c)return{bits:b,error:2};g<<=1;c=
h}}return{bits:b,error:0}}function n(a,b){var c;if(null===a||"object"!==typeof a||null===b||"object"!==typeof b||a.length!==b.length)return NaN;for(c=0;c<a.length;c++){if(a[c]<b[c])return-1;if(a[c]>b[c])return 1}return 0}function r(a){var b,c,e=0,d=[0,0,0,0];if(0>=a||32<a)return d;for(b=0;b<d.length;b++){d[b]=0;var g=128;for(c=7;0<=c;c--){if(e>=a)return d;d[b]|=g;g>>=1;++e}}return d}function t(a){var b,c=1,e=[0,0,0,0];if(null===a||4!==a.length)return null;for(b=a.length-1;0<=b;b--){var d=a[b]+c;if(255<
d){if(0===b)return null;c=d%255;d=0}else c=0;e[b]=d}return e}f.ERR_MASK_OK=0;f.ERR_MASK_WRONG=1;f.ERR_MASK_COMPLEX=2;f.getRanges=function(a,b){var c,e=[];if(!l(a)||!l(b))return null;switch(n(a,b)){case 1:return null;case 0:return[{from:a,to:b,mask:[255,255,255,255],prefixBits:32}];case -1:var d=a;var g=b;var h=m(d,g);var k=q(h);switch(k.error){case 0:e.push({from:d,to:g,mask:h,prefixBits:k.bits});break;case 2:for(c=0;0>=n(d,b)&&1!==k.error&&10>c;)h=r(k.bits+c),g=m(d,h),e.push({from:d,to:g,mask:h,
prefixBits:k.bits+c}),++c,d=t(g)}}return e};f.getIp4ByteArray=function(a){var b=[];a=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/.exec(a);if(null===a)return null;for(var c=1;5>c;c++){var e=parseInt(a[c],10);if(0>e||255<e)return null;b.push(e)}return b};f.getMask=m;f.getPrefixBitsNumber=q;f.compareIpAddresses=n;f.getMaskFromPrefixBits=r;f.getNextIp=t;f.isIPv4=l;f.isIPv6=function(a){return p(a,8,65536)}})(window.IPlib=window.IPlib||{});