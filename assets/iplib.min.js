(function(e,p){function d(a,b,c){var g=0;if(!h(a)||!h(b))return null;c===p&&(c=[]);if(32<c.length)return c;switch(q(a,b)){case 1:return null;case 0:c.push({from:a,to:b,mask:[255,255,255,255],prefixBits:32});break;case -1:var f=b;var m=l(a,f);var n=r(m);switch(n.error){case 0:c.push({from:a,to:f,mask:m,prefixBits:n.bits});break;case 2:do{g+=1;m=t(n.bits+g);var w=u(a,m);f=l(a,m)}while(32>=n.bits+g&&(0>q(w.from,a)||0<q(a,f)));0>=q(a,f)&&(c.push({from:a,to:f,mask:m,prefixBits:n.bits+g}),d(v(f),b,c))}}return c}
function h(a){return k(a,4,255)}function k(a,b,c){if("object"!==typeof a||null===a||a.length!==b)return!1;for(b=0;b<a.length;b++)if(0>a[b]||a[b]>c)return!1;return!0}function l(a,b,c){var g=[];if(null===a||null===b||a.length!==b.length)return null;c===p&&(c=255);for(var f=0;f<a.length;f++){var m=a[f]^b[f]^c;g.push(m)}return g}function r(a){var b=0,c=255,g,f;if(null===a)return{bits:-1,error:1};for(g=0;3>=g;g++){var m=a[g];for(f=7;0<=f;f--){var n=m&128;0<n&&b++;if(n>c)return{bits:b-1,error:2};m<<=1;
c=n}}return{bits:b,error:0}}function q(a,b){var c;if(null===a||"object"!==typeof a||null===b||"object"!==typeof b||a.length!==b.length)return NaN;for(c=0;c<a.length;c++){if(a[c]<b[c])return-1;if(a[c]>b[c])return 1}return 0}function t(a){var b,c,g=0,f=[0,0,0,0];if(0>=a||32<a)return f;for(b=0;b<f.length;b++){f[b]=0;var m=128;for(c=7;0<=c;c--){if(g>=a)return f;f[b]|=m;m>>=1;++g}}return f}function v(a){var b,c=1,g=[0,0,0,0];if(null===a||4!==a.length)return null;for(b=a.length-1;0<=b;b--){var f=a[b]+c;
if(255<f){if(0===b)return null;c=f%255;f=0}else c=0;g[b]=f}return g}function u(a,b){var c;if(a.length===p||b.length===p||a.length!==b.length)return null;var g=[];for(c=0;c<a.length;c++)g.push(a[c]&b[c]);return{from:g,to:l(a,b)}}e.ERR_MASK_OK=0;e.ERR_MASK_WRONG=1;e.ERR_MASK_COMPLEX=2;e.getRanges=d;e.getRange=u;e.getIp4ByteArray=function(a){var b=[];a=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/.exec(a);if(null===a)return null;for(var c=1;5>c;c++){var g=parseInt(a[c],10);if(0>g||255<g)return null;
b.push(g)}return b};e.getMask=l;e.getPrefixBitsNumber=r;e.compareIpAddresses=q;e.getMaskFromPrefixBits=t;e.getNextIp=v;e.isIPv4=h;e.isIPv6=function(a){return k(a,8,65536)}})(window.IPlib=window.IPlib||{});
function IPlibTest(){function e(h,k){var l;if(void 0!==h.length&&void 0!==k.length&&h.length===k.length&&h[0].hasOwnProperty("from")&&h[0].hasOwnProperty("to")&&h[0].hasOwnProperty("mask")&&h[0].hasOwnProperty("prefixBits")&&k[0].hasOwnProperty("from")&&k[0].hasOwnProperty("to")&&k[0].hasOwnProperty("mask")&&k[0].hasOwnProperty("prefixBits")){for(l=0;l<k.length;l++)if(h[l].prefixBits!==k[l].prefixBits||!p(h[l].from,k[l].from)||!p(h[l].to,k[l].to)||!p(h[l].mask,k[l].mask))throw console.log({expected:h,
actual:k}),"IpSubnet test not passed. Expected:"+h+", actual: "+k;console.log("Ranges test passed");return!0}if(h===k)return console.log("Test passed"),!0;throw"Test not passed. Expected:"+h+", actual: "+k;}function p(h,k){return h.every(function(l,r){return l===k[r]})}var d=IPlib.getPrefixBitsNumber([0,0,0,0]);e(0,d.bits);d=IPlib.getPrefixBitsNumber([255,0,0,0]);e(8,d.bits);d=IPlib.getPrefixBitsNumber([255,128,0,0]);e(9,d.bits);d=IPlib.getPrefixBitsNumber([255,192,0,0]);e(10,d.bits);d=IPlib.getPrefixBitsNumber([255,
224,0,0]);e(11,d.bits);d=IPlib.getPrefixBitsNumber([255,240,0,0]);e(12,d.bits);d=IPlib.getPrefixBitsNumber([255,248,0,0]);e(13,d.bits);d=IPlib.getPrefixBitsNumber([255,252,0,0]);e(14,d.bits);d=IPlib.getPrefixBitsNumber([255,254,0,0]);e(15,d.bits);d=IPlib.getPrefixBitsNumber([255,255,0,0]);e(16,d.bits);d=IPlib.getPrefixBitsNumber([255,225,0,0]);e(11,d.bits);d=IPlib.getPrefixBitsNumber([0,0,0,1]);e(0,d.bits);d=IPlib.getRanges([192,168,0,0],[192,168,0,255]);e([{from:[192,168,0,0],to:[192,168,0,255],
mask:[255,255,255,0],prefixBits:24}],d);d=IPlib.getRanges([221,0,0,0],[221,3,127,255]);e([{from:[221,0,0,0],to:[221,1,255,255],mask:[255,254,0,0],prefixBits:15},{from:[221,2,0,0],to:[221,2,255,255],mask:[255,255,0,0],prefixBits:16},{from:[221,3,0,0],to:[221,3,127,255],mask:[255,255,128,0],prefixBits:17}],d);d=IPlib.getRanges([61,140,0,0],[61,146,255,255]);e([{from:[61,140,0,0],to:[61,143,255,255],mask:[255,252,0,0],prefixBits:14},{from:[61,144,0,0],to:[61,145,255,255],mask:[255,254,0,0],prefixBits:15},
{from:[61,146,0,0],to:[61,146,255,255],mask:[255,255,0,0],prefixBits:16}],d);d=IPlib.getRanges([221,90,0,0],[221,97,255,255]);e([{from:[221,90,0,0],to:[221,91,255,255],mask:[255,254,0,0],prefixBits:15},{from:[221,92,0,0],to:[221,95,255,255],mask:[255,252,0,0],prefixBits:14},{from:[221,96,0,0],to:[221,97,255,255],mask:[255,254,0,0],prefixBits:15}],d)};