function nslookupPage(i,c){"use strict";const o=document.getElementById(i.button),g=document.getElementById(i.domainField),y=document.getElementById(i.serverSelector),v=document.getElementById(i.recTypeSelector),F=document.getElementById(i.resultElement);let L=function(e){e.key==="Enter"&&o.click()};g.addEventListener("keydown",L),y.addEventListener("change",function(){o.click()}),v.addEventListener("change",function(){o.click()}),o.addEventListener("click",function(e){A({btn:o,srv:y,types:v,df:g,res:F})}),g.focus();function A(e){const t=e.btn,a=e.srv,E=e.types,u=e.res;let r=e.df.value,h=E.options[E.selectedIndex].value,T=a.options[a.selectedIndex].dataset.url.replace("{domain}",r).replace("{type}",h),w=function(n){return n?`<div>Name: ${n}</div>`:""},l="",m="";if(r===""){u.innerHTML=s(c.msgEmptyString,"warning");return}if(S(r)||(b(r)?(l=k(r),l!==null?T=a.options[a.selectedIndex].dataset.url.replace("{domain}",l).replace("{type}",h):m=c.msgPunicode.replace("{domain}",p(r))):m=c.msgNotValid.replace("{domain}",p(r))),m!==""){u.innerHTML=s(m,"warning");return}t.disabled=!0,fetch(T,{method:"GET",headers:{Accept:"application/dns-json"}}).then(n=>n.json()).then(n=>{let d="";if(t.disabled=!1,!n||typeof n.Status>"u")d=s(c.msgUnexpected,"warning");else if(n.Status===3)d=s(c.msgNotExists.replace("{domain}",r),"warning");else if(n.Status===0&&typeof n.Answer<"u"&&n.Answer.length>0)for(let f=0;f<n.Answer.length;f++)d+=`<div class="doh-data-row">TTL ${n.Answer[f].TTL} s, ${p(n.Answer[f].data)}</div>`;else d=s(c.msgNoRecord,"warning");u.innerHTML=w(l)+d}).catch(n=>{t.disabled=!1,u.innerHTML=w(l)+s(c.msgAnError,"error")})}function p(e){const t=document.createElement("div");return t.innerText=e,t.innerHTML}function S(e){return/^(?!.*\.\.)(?!-)([A-Za-z0-9-]{1,63}(?<!-)\.)+[A-Za-z]{2,63}$/.test(e)}function b(e){return/^(?!.*\.\.)(?!-)([a-zA-Z0-9\u0080-\uFFFF-]{1,63}(?<!-)\.)+[a-zA-Z\u0080-\uFFFF]{2,63}$/.test(e)&&/[^\x00-\x7F]/.test(e)}function k(e){try{return new URL(`http://${e}`).hostname}catch{return null}}function s(e,t){return`<div class="page-message page-message--${t}">${e}</div>`}}
