function nslookupPage(o,c){"use strict";const i=document.getElementById(o.button),a=document.getElementById(o.domainField),y=document.getElementById(o.serverSelector),v=document.getElementById(o.recTypeSelector),F=document.getElementById(o.resultElement);let L=function(e){(e.key==="Enter"||e.keyCode===13)&&(e.preventDefault(),i.click())};a.addEventListener("keydown",L),a.addEventListener("change",function(){i.click()}),y.addEventListener("change",function(){i.click()}),v.addEventListener("change",function(){i.click()}),i.addEventListener("click",function(e){A({btn:i,srv:y,types:v,df:a,res:F})}),a.focus();function A(e){const t=e.btn,u=e.srv,E=e.types,m=e.res;let r=e.df.value,h=E.options[E.selectedIndex].value,T=u.options[u.selectedIndex].dataset.url.replace("{domain}",r).replace("{type}",h),w=function(n){return n?`<div>Name: ${n}</div>`:""},l="",f="";if(r===""){m.innerHTML=s(c.msgEmptyString,"warning");return}if(k(r)||(S(r)?(l=b(r),l!==null?T=u.options[u.selectedIndex].dataset.url.replace("{domain}",l).replace("{type}",h):f=c.msgPunicode.replace("{domain}",p(r))):f=c.msgNotValid.replace("{domain}",p(r))),f!==""){m.innerHTML=s(f,"warning");return}t.disabled=!0,fetch(T,{method:"GET",headers:{Accept:"application/dns-json"}}).then(n=>n.json()).then(n=>{let d="";if(t.disabled=!1,!n||typeof n.Status>"u")d=s(c.msgUnexpected,"warning");else if(n.Status===3)d=s(c.msgNotExists.replace("{domain}",r),"warning");else if(n.Status===0&&typeof n.Answer<"u"&&n.Answer.length>0)for(let g=0;g<n.Answer.length;g++)d+=`<div class="doh-data-row">TTL ${n.Answer[g].TTL} s, ${p(n.Answer[g].data)}</div>`;else d=s(c.msgNoRecord,"warning");m.innerHTML=w(l)+d}).catch(n=>{t.disabled=!1,m.innerHTML=w(l)+s(c.msgAnError,"error")})}function p(e){const t=document.createElement("div");return t.innerText=e,t.innerHTML}function k(e){return/^(?!.*\.\.)(?!-)([A-Za-z0-9-]{1,63}(?<!-)\.)+[A-Za-z]{2,63}$/.test(e)}function S(e){return/^(?!.*\.\.)(?!-)([a-zA-Z0-9\u0080-\uFFFF-]{1,63}(?<!-)\.)+[a-zA-Z\u0080-\uFFFF]{2,63}$/.test(e)&&/[^\x00-\x7F]/.test(e)}function b(e){try{return new URL(`http://${e}`).hostname}catch{return null}}function s(e,t){return`<div class="page-message page-message--${t}">${e}</div>`}}
