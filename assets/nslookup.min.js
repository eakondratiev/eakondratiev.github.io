function nslookupPage(i,c){"use strict";const l=document.getElementById(i.button),g=document.getElementById(i.domainField),v=document.getElementById(i.serverSelector),h=document.getElementById(i.recTypeSelector),A=document.getElementById(i.resultElement);let L=function(e){(e.key==="Enter"||e.keyCode===13)&&l.click()};g.addEventListener("keydown",L),v.addEventListener("change",function(){l.click()}),h.addEventListener("change",function(){l.click()}),l.addEventListener("click",function(e){k({btn:l,srv:v,types:h,df:g,res:A})}),g.focus();function k(e){const t=e.btn,u=e.srv,E=e.types,m=e.res;let r=e.df.value,w=E.options[E.selectedIndex].value,T=u.options[u.selectedIndex].dataset.url.replace("{domain}",r).replace("{type}",w),F=function(n){return n?`<div>Name: ${n}</div>`:""},o="",f="";if(r===""){m.innerHTML=s(c.msgEmptyString,"warning");return}if(S(r)||($(r)?(o=b(r),o!==null?T=u.options[u.selectedIndex].dataset.url.replace("{domain}",o).replace("{type}",w):f=c.msgPunicode.replace("{domain}",y(r))):f=c.msgNotValid.replace("{domain}",y(r))),f!==""){m.innerHTML=s(f,"warning");return}t.disabled=!0,fetch(T,{method:"GET",headers:{Accept:"application/dns-json"}}).then(n=>n.json()).then(n=>{let d="",I=/^(\d+)\s+(.+)/;if(t.disabled=!1,!n||typeof n.Status>"u")d=s(c.msgUnexpected,"warning");else if(n.Status===3)d=s(c.msgNotExists.replace("{domain}",r),"warning");else if(n.Status===0&&typeof n.Answer<"u"&&n.Answer.length>0)for(let a=0;a<n.Answer.length;a++){let p=y(n.Answer[a].data);switch(n.Answer[a].type){case 15:p=p.replace(I,"Priority $1, $2");break}d+=`<div class="doh-data-row">TTL ${n.Answer[a].TTL} s, ${p}</div>`}else d=s(c.msgNoRecord,"warning");m.innerHTML=F(o)+d}).catch(n=>{t.disabled=!1,m.innerHTML=F(o)+s(c.msgAnError,"error")})}function y(e){const t=document.createElement("div");return t.innerText=e,t.innerHTML}function S(e){return/^(?!.*\.\.)(?!-)([_A-Za-z0-9-]{1,63}(?<!-)\.)+[A-Za-z]{2,63}$/.test(e)}function $(e){return/^(?!.*\.\.)(?!-)([a-zA-Z0-9\u0080-\uFFFF-]{1,63}(?<!-)\.)+[a-zA-Z\u0080-\uFFFF]{2,63}$/.test(e)&&/[^\x00-\x7F]/.test(e)}function b(e){try{return new URL(`http://${e}`).hostname}catch{return null}}function s(e,t){return`<div class="page-message page-message--${t}">${e}</div>`}}
