function wsPage(){function w(){var a=p.getSegments(),d=e.selectionStart,f=e.selectionEnd,c;if(0===a.length){var b=e.value.codePointAt(d);a=void 0!==b&&1>=e.selectionEnd-d?b:0;if(0===a)t.innerHTML="",m.innerHTML="";else{t.innerHTML=String.fromCodePoint(a);b=Array(4);for(c=3;0<=c;c--)b[c]=a>>8*c&255;c=0;var g="";for(a=b.length-1;0<=a;a--)if(0===b[a])++c;else break;for(a=b.length-1;0<=a;a--)0===b[a]&&(2<=c&&2<=a||1===c&&3===a)||(g=1>=c&&2===a?g+b[a].toString(16):g+x(b[a]));b="U+"+g.toUpperCase();m.innerHTML=
b}}else for(m.innerHTML="",b=0;b<a.length;b++)if(a[b].index===d){c=a[b].segment;g=m.innerHTML;for(var k="",n=c[Symbol.iterator](),h=n.next();!h.done;)k&&(k+=" "),h=h.value.codePointAt(0),k+="U+"+h.toString(16).padStart(4,"0").toUpperCase(),h=n.next();m.innerHTML=g+k;t.textContent=c}a=l.querySelectorAll(".byte-hl");for(b=0;b<a.length;b++)a[b].classList.remove("byte-hl");f=d===f?d+1:f;for(b=d;b<f;b++)(d=document.getElementById("charpos-"+b))&&d.classList.add("byte-hl")}function q(){var a=e.value;var d=
/([\u00FF-\uFFFF])/g,f=a.match(d);f=f?f.length:0;a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(d,"<b>$1</b>").replace(/\t/g,"<i>&rarr;</i>").replace(/[\u0020\u00A0\u2000-\u200A\u2028\u205F\u3000]/g,"<i>.</i>").replace(/[\n\u2029]/g,'<i class="new-line-symbol">&para;</i><br />');p.update(e.value);y.innerText="";var c=e.value;d="";var b=c[Symbol.iterator](),g=0,k=0;if(u&&0<c.length){for(c=b.next();!c.done;){var n=c.value;var h=u.encode(n);var z="";for(c=0;c<h.length;c++)z+=x(h[c])+" ",k+=1;
d+=`<i id="charpos-${g}">${z.trim()}</i> `;g+=n.length;c=b.next()}l.innerHTML=d;l.style.display="block";r&&(r.style.display="block")}else l.textContent="",l.style.display="none",r&&(r.style.display="none");y.innerText=k;A.innerHTML=a;E.innerHTML=f;B.style.display=0<f?"":"none";A.style.display=0<e.value.length?"block":"none";F.innerHTML=p.getLength().toString();window.history.pushState&&window.history.pushState("ws.htm","Title","/ws.htm?t="+encodeURIComponent(e.value))}function x(a){var d=a.toString(16).toUpperCase();
return 16>a?"0"+d:d}var e=document.getElementById("text-box"),A=document.getElementById("text-processed"),F=document.getElementById("text-len"),B=document.getElementById("nonascii-counter"),E=B.getElementsByTagName("b")[0],C=document.getElementById("bytes-counter"),y=C.getElementsByTagName("b")[0],l=document.getElementById("text-bytes"),r=l.previousElementSibling,u="undefined"!==typeof TextEncoder?new TextEncoder:null,v=document.getElementById("text-character"),t=v.getElementsByTagName("b")[0],m=
v.getElementsByTagName("b")[1],D=T.getUrlParameters(),p=function(){var a=0,d=null,f=[];return{init:function(){try{d=new Intl.Segmenter("en",{granularity:"grapheme"});var c=d.segment("abc");var b=c[Symbol.iterator]();b.next()}catch(g){d=null}},update:function(c){if(d)try{a=0;f=Array.from(d.segment(c));a=f.length;return}catch(b){f=[]}a=c.length},getLength:function(){return a},getSegments:function(){return f}}}();p.init();u&&(C.style.display="");e.focus();void 0!==D.t&&(e.value=decodeURIComponent(D.t),
q());"undefined"!==typeof Event&&"object"===typeof e.oninput?e.addEventListener("input",q):(e.addEventListener("change",q),e.addEventListener("paste",function(a){setTimeout(function(){q(a)},0)}));void 0!==window.getSelection&&void 0!==String.fromCodePoint&&(v.style.display="block",e.addEventListener("keyup",w),e.addEventListener("mouseup",w))};
