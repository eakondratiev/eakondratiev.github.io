function wsPage(){"use strict";var N="t",f="byte-hl",a=document.getElementById("text-box"),v=document.getElementById("text-processed"),H=document.getElementById("text-len"),h=document.getElementById("nonascii-counter"),P=h.getElementsByTagName("b")[0],x=document.getElementById("bytes-counter"),B=x.getElementsByTagName("b")[0],s=document.getElementById("text-bytes"),d=s.previousElementSibling,p=typeof TextEncoder<"u"?new TextEncoder:null,E=document.getElementById("text-character"),b=E.getElementsByTagName("b")[0],g=E.getElementsByTagName("b")[1],S=T.getUrlParameters(),m=(function(){var n=0,e=null,t=[];return{init:function(){var r,o,i;try{e=new Intl.Segmenter("en",{granularity:"grapheme"}),r=e.segment("abc"),o=r[Symbol.iterator](),i=o.next()}catch{e=null}},update:function(r){if(e)try{n=0,t=Array.from(e.segment(r)),n=t.length;return}catch{t=[]}n=r.length},getLength:function(){return n},getSegments:function(){return t}}})();m.init(),p&&(x.style.display=""),a.focus(),S.t!==void 0&&(a.value=decodeURIComponent(S.t),y()),typeof Event<"u"&&typeof a.oninput=="object"?a.addEventListener("input",y):(a.addEventListener("change",y),a.addEventListener("paste",function(n){setTimeout(function(){y(n)},0)})),window.getSelection!==void 0&&String.fromCodePoint!==void 0&&(E.style.display="block",a.addEventListener("keyup",L),a.addEventListener("mouseup",L));function L(){var n=m.getSegments(),e=a.selectionStart,t=a.selectionEnd,r,o="",i,l,c,u;if(n.length===0)r=M(e),r===0?(b.innerHTML="",g.innerHTML=""):(b.innerHTML=String.fromCodePoint(r),g.innerHTML=U(r));else for(g.innerHTML="",i=0;i<n.length;i++)n[i].index===e&&(o=n[i].segment,g.innerHTML+=k(o),b.textContent=o);for(l=s.querySelectorAll("."+f),i=0;i<l.length;i++)l[i].classList.remove(f);for(u=e===t?e+1:t,i=e;i<u;i++)c=document.getElementById("charpos-"+i),c&&c.classList.add(f)}function M(n){var e=a.value.codePointAt(n);return e!==void 0&&a.selectionEnd-n<=1?e:0}function w(n){var e=new Array(4),t;for(t=3;t>=0;t--)e[t]=n>>t*8&255;return e}function y(){var n=I(a.value);m.update(a.value),B.innerText="",F(a.value),v.innerHTML=n.text,P.innerHTML=n.nonAscii,n.nonAscii>0?h.style.display="":h.style.display="none",a.value.length>0?v.style.display="block":v.style.display="none",H.innerHTML=m.getLength().toString()}function I(n){var e=/([\u00FF-\uFFFF])/g,t=/[\n\u2029]/g,r=/[\u0020\u00A0\u2000-\u200A\u2028\u205F\u3000]/g,o=/\t/g,i=n.match(e),l=i?i.length:0;return{text:n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(e,"<b>$1</b>").replace(o,"<i>&rarr;</i>").replace(r,"<i>.</i>").replace(t,'<i class="new-line-symbol">&para;</i><br />'),nonAscii:l}}function F(n){var e="",t,r=n[Symbol.iterator](),o,i,l,c=0,u,A=0;if(p&&n.length>0){for(i=r.next();!i.done;){for(o=i.value,l=p.encode(o),u="",t=0;t<l.length;t++)u+=C(l[t])+" ",A+=1;e+=`<i id="charpos-${c}">${u.trim()}</i> `,c+=o.length,i=r.next()}s.innerHTML=e,s.style.display="block",d&&(d.style.display="block")}else s.textContent="",s.style.display="none",d&&(d.style.display="none");B.innerText=A}function U(n){var e=w(n),t,r=0,o="";for(t=e.length-1;t>=0&&e[t]===0;t--)++r;for(t=e.length-1;t>=0;t--)e[t]===0&&(r>=2&&t>=2||r===1&&t===3)||(r<=1&&t===2?o+=e[t].toString(16):o+=C(e[t]));return"U+"+o.toUpperCase()}function C(n){var e=n.toString(16).toUpperCase();return n<16?"0"+e:e}function k(n){for(var e="",t=n[Symbol.iterator](),r=t.next();!r.done;){e&&(e+=" ");const o=r.value.codePointAt(0);e+="U+"+o.toString(16).padStart(4,"0").toUpperCase(),r=t.next()}return e}}
