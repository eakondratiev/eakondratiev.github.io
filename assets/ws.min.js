function wsPage(){function g(){var c=e.value;var b=/([\u00FF-\uFFFF])/g,a=c.match(b);a=a?a.length:0;c=c.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(b,"<b>$1</b>").replace(/\t/g,"<i>&rarr;</i>").replace(/[\u0020\u00A0\u2000-\u200A\u2028\u205F\u3000]/g,"<i>.</i>").replace(/[\n\u2029]/g,'<i class="new-line-symbol">&para;</i><br />');var d=0<arguments.length&&"keyup"===arguments[0].type;if(n&&(b=e.value,b=(new TextEncoder).encode(b),y.innerText=b.length,!d)){d="";var f;if(0<b.length){for(f=0;f<
b.length;f++)d+="<i>"+p(b[f])+"</i>",0!==f&&0===(f+1)%16&&(d+="<br>");h.innerHTML=d;h.style.display="block"}else h.textContent="",h.style.display="none"}q.innerHTML=c;z.innerHTML=a;r.style.display=0<a?"":"none";q.style.display=0<e.value.length?"block":"none";l.update(e.value);A.innerHTML=l.getLength().toString();"function"===typeof k&&k();window.history.pushState&&window.history.pushState("ws.htm","Title","/ws.htm?t="+encodeURIComponent(e.value))}function p(c){var b=c.toString(16).toUpperCase();return 16>
c?"0"+b:b}var k=void 0,e=document.getElementById("text-box"),q=document.getElementById("text-processed"),A=document.getElementById("text-len"),r=document.getElementById("nonascii-counter"),z=r.getElementsByTagName("b")[0],t=document.getElementById("bytes-counter"),y=t.getElementsByTagName("b")[0],h=document.getElementById("text-bytes"),n="undefined"!==typeof TextEncoder,m=document.getElementById("text-character"),u=m.getElementsByTagName("b")[0],v=m.getElementsByTagName("b")[1],w=T.getUrlParameters(),
l=function(){var c=0,b=null;return{init:function(){try{b=new Intl.Segmenter("en",{granularity:"grapheme"});var a=b.segment("abc");var d=a[Symbol.iterator]();d.next()}catch(f){b=null}},update:function(a){var d;if(b)try{c=0;var f=b.segment(a);var x=f[Symbol.iterator]();for(d=x.next();!d.done;)c++,d=x.next();return}catch(B){}c=a.length},getLength:function(){return c}}}();l.init();n&&(t.style.display="");e.focus();"undefined"!==typeof Event&&"object"===typeof e.oninput?e.addEventListener("input",g):(e.addEventListener("change",
g),e.addEventListener("paste",function(c){setTimeout(function(){g(c)},0)}));e.addEventListener("keyup",g);void 0!==w.t&&(e.value=decodeURIComponent(w.t),g());void 0!==window.getSelection&&void 0!==String.fromCodePoint&&(m.style.display="block",e.onmouseup=function(){k()},k=function(){var c=e.selectionStart,b=e.value.codePointAt(c);var a=void 0!==b&&1>=e.selectionEnd-c?b:0;c="";b=0;if(0===a||void 0===a)u.innerHTML="",v.innerHTML="";else{0<a&&(u.innerHTML=String.fromCodePoint(a));var d=Array(4),f;for(f=
3;0<=f;f--)d[f]=a>>8*f&255;for(a=d.length-1;0<=a;a--)if(0===d[a])++b;else break;for(a=d.length-1;0<=a;a--)0===d[a]&&(2<=b&&2<=a||1===b&&3===a)||(c=1>=b&&2===a?c+d[a].toString(16):c+p(d[a]));v.innerHTML="U+"+c}})};
