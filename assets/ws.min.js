function wsPage(){function u(){var a=m.getSegments(),b=f.selectionStart,c=f.selectionEnd,d;if(0===a.length){var e=f.value.codePointAt(b);var g=void 0!==e&&1>=f.selectionEnd-b?e:0;0===g?(q.innerHTML="",l.innerHTML=""):(q.innerHTML=String.fromCodePoint(g),l.innerHTML=v(g))}else for(l.innerHTML="",e=0;e<a.length;e++)if(a[e].index===b){var h=a[e].segment;for(d=0;d<h.length;d++)g=h.codePointAt(d),l.innerHTML+=v(g)+" ";q.textContent=h}a=k.querySelectorAll(".byte-hl");for(e=0;e<a.length;e++)a[e].classList.remove("byte-hl");
c=b===c?b+1:c;for(e=b;e<c;e++)(b=document.getElementById("charpos-"+e))&&b.classList.add("byte-hl")}function n(){var a=f.value;var b=/([\u00FF-\uFFFF])/g,c=a.match(b);c=c?c.length:0;a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(b,"<b>$1</b>").replace(/\t/g,"<i>&rarr;</i>").replace(/[\u0020\u00A0\u2000-\u200A\u2028\u205F\u3000]/g,"<i>.</i>").replace(/[\n\u2029]/g,'<i class="new-line-symbol">&para;</i><br />');m.update(f.value);w.innerText="";var d=f.value;b="";var e=d[Symbol.iterator](),g=
0,h=0;if(r&&0<d.length){for(d=e.next();!d.done;){var x=d.value;var y=r.encode(x);var z="";for(d=0;d<y.length;d++)z+=A(y[d])+" ",h+=1;b+=`<i id="charpos-${g}">${z.trim()}</i> `;g+=x.length;d=e.next()}k.innerHTML=b;k.style.display="block";p&&(p.style.display="block")}else k.textContent="",k.style.display="none",p&&(p.style.display="none");w.innerText=h;B.innerHTML=a;F.innerHTML=c;C.style.display=0<c?"":"none";B.style.display=0<f.value.length?"block":"none";G.innerHTML=m.getLength().toString();window.history.pushState&&
window.history.pushState("ws.htm","Title","/ws.htm?t="+encodeURIComponent(f.value))}function v(a){var b=Array(4),c;for(c=3;0<=c;c--)b[c]=a>>8*c&255;c=0;var d="";for(a=b.length-1;0<=a;a--)if(0===b[a])++c;else break;for(a=b.length-1;0<=a;a--)0===b[a]&&(2<=c&&2<=a||1===c&&3===a)||(d=1>=c&&2===a?d+b[a].toString(16):d+A(b[a]));return"U+"+d}function A(a){var b=a.toString(16).toUpperCase();return 16>a?"0"+b:b}var f=document.getElementById("text-box"),B=document.getElementById("text-processed"),G=document.getElementById("text-len"),
C=document.getElementById("nonascii-counter"),F=C.getElementsByTagName("b")[0],D=document.getElementById("bytes-counter"),w=D.getElementsByTagName("b")[0],k=document.getElementById("text-bytes"),p=k.previousElementSibling,r="undefined"!==typeof TextEncoder?new TextEncoder:null,t=document.getElementById("text-character"),q=t.getElementsByTagName("b")[0],l=t.getElementsByTagName("b")[1],E=T.getUrlParameters(),m=function(){var a=0,b=null,c=[];return{init:function(){try{b=new Intl.Segmenter("en",{granularity:"grapheme"});
var d=b.segment("abc");var e=d[Symbol.iterator]();e.next()}catch(g){b=null}},update:function(d){if(b)try{a=0;c=Array.from(b.segment(d));a=c.length;return}catch(e){c=[]}a=d.length},getLength:function(){return a},getSegments:function(){return c}}}();m.init();r&&(D.style.display="");f.focus();void 0!==E.t&&(f.value=decodeURIComponent(E.t),n());"undefined"!==typeof Event&&"object"===typeof f.oninput?f.addEventListener("input",n):(f.addEventListener("change",n),f.addEventListener("paste",function(a){setTimeout(function(){n(a)},
0)}));void 0!==window.getSelection&&void 0!==String.fromCodePoint&&(t.style.display="block",f.addEventListener("keyup",u),f.addEventListener("mouseup",u))};
