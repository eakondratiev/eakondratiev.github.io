function wsPage(){function p(){var a=k.getSegments(),b=d.selectionStart,c;if(0===a.length)a=d.value.codePointAt(b),b=void 0!==a&&1>=d.selectionEnd-b?a:0,0===b?(m.innerHTML="",g.innerHTML=""):(m.innerHTML=String.fromCodePoint(b),g.innerHTML=q(b));else for(g.innerHTML="",c=0;c<a.length;c++)if(a[c].index===b){a=a[c].segment;for(c=0;c<a.length;c++)b=a.codePointAt(c),g.innerHTML+=q(b)+" ";m.textContent=a;break}}function h(){var a=d.value;var b=/([\u00FF-\uFFFF])/g,c=a.match(b);c=c?c.length:0;a=a.replace(/</g,
"&lt;").replace(/>/g,"&gt;").replace(b,"<b>$1</b>").replace(/\t/g,"<i>&rarr;</i>").replace(/[\u0020\u00A0\u2000-\u200A\u2028\u205F\u3000]/g,"<i>.</i>").replace(/[\n\u2029]/g,'<i class="new-line-symbol">&para;</i><br />');var e=0<arguments.length&&"keyup"===arguments[0].type;if(r&&(b=d.value,b=(new TextEncoder).encode(b),z.innerText=b.length,!e)){e="";var f;if(0<b.length){for(f=0;f<b.length;f++)e+="<i>"+t(b[f])+"</i>",0!==f&&0===(f+1)%16&&(e+="<br>");l.innerHTML=e;l.style.display="block"}else l.textContent=
"",l.style.display="none"}u.innerHTML=a;A.innerHTML=c;v.style.display=0<c?"":"none";u.style.display=0<d.value.length?"block":"none";k.update(d.value);B.innerHTML=k.getLength().toString();w&&p();window.history.pushState&&window.history.pushState("ws.htm","Title","/ws.htm?t="+encodeURIComponent(d.value))}function q(a){var b=Array(4),c;for(c=3;0<=c;c--)b[c]=a>>8*c&255;c=0;var e="";for(a=b.length-1;0<=a;a--)if(0===b[a])++c;else break;for(a=b.length-1;0<=a;a--)0===b[a]&&(2<=c&&2<=a||1===c&&3===a)||(e=
1>=c&&2===a?e+b[a].toString(16):e+t(b[a]));return"U+"+e}function t(a){var b=a.toString(16).toUpperCase();return 16>a?"0"+b:b}var w=!1,d=document.getElementById("text-box"),u=document.getElementById("text-processed"),B=document.getElementById("text-len"),v=document.getElementById("nonascii-counter"),A=v.getElementsByTagName("b")[0],x=document.getElementById("bytes-counter"),z=x.getElementsByTagName("b")[0],l=document.getElementById("text-bytes"),r="undefined"!==typeof TextEncoder,n=document.getElementById("text-character"),
m=n.getElementsByTagName("b")[0],g=n.getElementsByTagName("b")[1],y=T.getUrlParameters(),k=function(){var a=0,b=null,c=[];return{init:function(){try{b=new Intl.Segmenter("en",{granularity:"grapheme"});var e=b.segment("abc");var f=e[Symbol.iterator]();f.next()}catch(C){b=null}},update:function(e){if(b)try{a=0;c=Array.from(b.segment(e));a=c.length;return}catch(f){c=[]}a=e.length},getLength:function(){return a},getSegments:function(){return c}}}();k.init();r&&(x.style.display="");d.focus();"undefined"!==
typeof Event&&"object"===typeof d.oninput?d.addEventListener("input",h):(d.addEventListener("change",h),d.addEventListener("paste",function(a){setTimeout(function(){h(a)},0)}));d.addEventListener("keyup",h);void 0!==y.t&&(d.value=decodeURIComponent(y.t),h());void 0!==window.getSelection&&void 0!==String.fromCodePoint&&(w=!0,n.style.display="block",d.onmouseup=function(){p()})};
