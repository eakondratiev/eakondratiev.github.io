<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Velocity Comparer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="apple-mobile-web-app-title" content="EA Velocity Comparer" />
    <meta name="application-name" content="EA Velocity Comparer" />
    <meta name="msapplication-config" content="/assets/icons/browserconfig.xml" />
    <meta name="theme-color" content="#ffffff" />
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon-180.png" />
    <link rel="manifest" href="/assets/icons/manifest.json" />
    <link rel="icon" type="image/png" href="/assets/icons/favicon-32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/assets/icons/favicon-16.png" sizes="16x16" />
  
    <link href="/assets/main.css" rel="stylesheet" type="text/css" />
    <style>
      .velocity-utnis {font-size: .8rem; margin:4pt 0 16pt 0;}
      .velocity-utnis label {margin-right: 8pt;}
    </style>
  </head>
  <body>
    <div class="page-wide header">
      <header class="content">
        <h1>Velocity Comparer</h1>
      </header>
    </div>
    <div class="page-wide">
      <div class="content">
        <p>Velocity</p>
        <div>
          <input type="text" id="velocity-value" class="velocity-value" />
        </div>
        <div id="velocity-units" class="velocity-utnis">
          <label>
            <input type="radio" name="velocity-unit" value="ms" data-k="1" checked /> m/s
          </label>
          <label>
            <input type="radio" name="velocity-unit" value="kms" data-k="1000" /> km/h
          </label>
          <label>
            <input type="radio" name="velocity-unit" value="kmh" data-k="10/36" /> km/h
          </label>
          <label>
            <input type="radio" name="velocity-unit" value="mph" data-k="0.447" /> mph
          </label>
        </div>
      </div>
    </div>
    <div class="page-wide footer">
      ...
    </div>
    <script>
      (function () {

        var velocityValueElement = document.getElementById ('velocity-value'),
          velocityUnitElements = document.getElementsByName ('velocity-unit');

        velocityValueElement.onchange = velocityChanged;
        velocityValueElement.onkeyup = velocityChanged;


        /**
         * Update calculations
         */
        function velocityChanged () {

          var vTxt,
            vNumber,
            unitData,
            velocity;
          
          if (velocityValueElement === null) {
            console.log ('Value element is null;')
            return;
          }

          vTxt = velocityValueElement.value.replace(',', '.');
          vNumber = parseFloat (vTxt);
          unitData = getUnitData ();

          if (unitData === null) {
            console.log ('Unit not selected');
            return;
          }

          console.log ({vTxt, vNumber});
          console.log (unitData);

          velocity = vNumber * unitData.k; // m/s

          console.log ('Velocity: ' + velocity.toString() + ' m/s.')
        }

        /**
         * Returns the selected unit properties.
         */
        function getUnitData () {

          var i,
            k,
            overPosition;

          for (i = 0; i < velocityUnitElements.length; i++) {

            if (velocityUnitElements[i].checked) {

              k = velocityUnitElements[i].dataset.k;
              overPosition = k.indexOf ('/');

              if (overPosition >= 0) {
                // k in the form of a/b
                k = parseFloat (k.substring (0, overPosition)) / parseFloat (k.substring (overPosition + 1));
              }
              else {
                k = parseFloat (k);
              }

              return {
                name: velocityUnitElements[i].value,
                k: k
              }
            }

          }

          return null;
        }
      })();
    </script>
  </body>
</html>